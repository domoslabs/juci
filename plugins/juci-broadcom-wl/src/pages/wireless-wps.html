<juci-layout-with-sidebar>
	<div ng-controller="wirelessWPSPage">
		<juci-config>
			<juci-config-section>
				<juci-config-heading>{{ 'WPS Settings' | translate }}</juci-config-heading>
				<juci-config-info>{{ 'wifi.wps.info' | translate }}</juci-config-info>
				<juci-config-lines>
					<juci-config-line title="{{'WPS Function'|translate}}">
						<switch id="enabled" name="enabled" ng-model="wireless.status.wps.value" class="green" ng-change="save()"></switch>
					</juci-config-line>
				</juci-config-lines>
			</juci-config-section>
			<juci-config-section ng-show="progress == 1">
				<p translate>Your router is now attempting to pair with other devices.</p>
			</juci-config-section>
			<juci-config-section ng-show="wireless.status.wps.value && progress != 1">
				<juci-config-lines ng-repeat="interface in wireless['@wifi-iface'] track by $index">
					<juci-config-line title="{{'Enable WPS on'|translate}} {{interface.ssid.value}} ({{getFrequensy(interface.device.value)}})">
						<switch ng-show="wpsUnlocked(interface)" ng-model="interface.wps_pbc.value" class="green" ng-change="save()" ></switch>
						<strong ng-hide="wpsUnlocked(interface)" translate>Disabled</strong>
					</juci-config-line>
				</juci-config-lines>
			</juci-config-section>
			<juci-config-section ng-show="wireless.status.wps.value">
				<h2 translate>WPS-PBC: Push Button on Device</h2>
				<p translate>To pair your device, press Pair. Afterwards, press the corresponding button on the device you wish to connect. Your router will be open for pairing for 2 minutes after you pressed Pair.</p>
				<juci-config-lines>
					<juci-config-line title="{{'Enable WPS button on router'|translate}}">
						<switch id="enabled" name="enabled" ng-model="router.wps_button_enabled" class="green" ng-change="save()" ></switch>
					</juci-config-line>
					<juci-config-line ng-show="router.wps_button_enabled" title="{{'Pressing WiFi on/off button on your router for long time activates pairing '|translate}}" >
						<switch id="enabled" name="enabled" ng-model="router.wifi_button_wps_function_enabled" class="green" ng-change="save()" ></switch>
					</juci-config-line>
					<juci-config-line title="{{'Pair (within 2 minutes)'|translate}}">
						<button class="btn btn-lg btn-{{wpsButtonColor}} col-xs-12" ng-mouseup="mouseUp()" ng-mousedown="mouseDown()" translate>Pair</button>
					</juci-config-line>
				</juci-config-lines>
			</juci-config-section>
			<div ng-show="showExpert">
				<juci-config-section ng-show="wireless.status.wps.value">
					<h2 translate>WPS-REG: Router provides PIN</h2>
					<p translate>Enter the WPS-PIN below on the device you wish to pair.</p>
					<juci-config-lines>
						<juci-config-line title="{{'WPS Using Generated PIN'|translate}}">
							<switch id="enabled" name="enabled" ng-model="router.wps_devicepin"  class="green"></switch>
						</juci-config-line>
						<juci-config-line title="{{'Generated PIN'|translate}}" >
							<input type="text" class="form-control input-lg"  ng-model="generatedPIN" readonly />
						</juci-config-line>
						<juci-config-line title="{{'Generate New PIN'|translate}}" >
							<button class="btn btn-lg btn-default" ng-click="onGeneratePIN()" translate>Generate</button>
						</juci-config-line>
					</juci-config-lines>
				</juci-config-section>
				<juci-config-section ng-show="wireless.status.wps.value">
					<h2 translate>WPS-PIN: Another Device provides PIN</h2>
					<p translate>Enter the WPS-PIN provided by the other device here.</p>
					<juci-config-lines>
						<juci-config-line title="{{'Enter your device PIN'|translate}}" error="data.pin_error">
							<input type="text" class="form-control input-lg" ng-model="data.userPIN" ng-change="validPin()" placeholder="{{'Enter your PIN here'|translate}}"/>
						</juci-config-line>
						<juci-config-line title="{{'Pair (within 2 minutes)'|translate}}">
							<button class="btn btn-lg btn-default {{(data.valid_wps_pin)?'':'disabled'}}" ng-click="onPairUserPIN()" translate>Pair</button>
						</juci-config-line>
					</juci-config-lines>
				</juci-config-section>
			</div>
		</juci-config>
		<modal title="{{'Attempting to Pair'|translate}}" data-keyboard="false" data-backdrop="static" ng-show="progress > 0 && progress != 2 && progress < 8" dismiss-label="Cancel" on-dismiss="onCancelWPS()">
			<div style="text-align: center;">
				<div ng-show="progress != 0">
					<i class="fa fa-spinner fa-spin fa-3x"></i>
				</div>
				<p>{{text_status}}</p>
			</div>
		</modal>
	</div>
</juci-layout-with-sidebar>
