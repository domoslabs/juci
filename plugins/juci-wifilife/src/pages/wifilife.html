<juci-layout-with-sidebar>
	<div ng-controller="wifilife">
		<div>
			<h1 translate>Wifilife</h1>
			<juci-config-section>
				<juci-config-lines>
					<juci-config-line title="{{ 'Enable Wifilife' | translate }}" help="{{'Placeholder text.'|translate}}">
						<div class="row">
							<switch ng-model="wifilife.enabled.value" class="green" />
						</div>
					</juci-config-line>
				</juci-config-lines>
			</juci-config-section>
			<juci-config-section ng-show="wifilife.enabled.value">
				<juci-config-line title="{{ 'Steering On/Off' | translate}}">
					<switch class="green" ng-model="steer.enabled.value" />
				</juci-config-line>
				<juci-config-lines ng-show="steer.enabled.value">
					<juci-config-line title="{{ 'Steering Interface' | translate}}" help="{{'Interface to use for RSSI steering.'|translate}}">
						<juci-select ng-model="steer.ifname.value" ng-items="wiLiInterfaces"></juci-select>
					</juci-config-line>
					<juci-config-line title="{{ 'Steer Parameter Configurations' | translate}}"></juci-config-line>
					<juci-list-editor ng-items="params" item-editor="uci-option-edit" show-icon="true" get-item-title="$item['.name'].toUpperCase()" hide-buttons="true"></juci-list-editor>

					<juci-expandable title="{{'Steered Clients'|translate}}" open="true" ng-show="0"> <!--never show for now-->
						<table class="table">
							<thead>
								<th> MAC <i style="float:right" class="fa "></i></th>
							</thead>
							<tr ng-repeat="mac in bssload.victims.value">
								<td>{{mac}}</td>
							</tr>
						</table>
					</juci-expandable>
					<juci-config-line title="{{'Steering Exclusion Policy'|translate}}" help="{{'Devices which MAC addresses are included in the exclude list will not be steered.'|translate}}"></juci-config-line>
					<juci-config-line title="{{'Exclude Repeaters' | translate}}" help="{{'Choose a MAC address from the list of currently active wireless devices to be added to the exclude list.'|translate}}">
						<div class="checkbox checkbox-info">
							<input type="checkbox" ng-model="steerDefault.exclude_rpt.value" ng-click="toggleIncludeRpt()" />
							<label></label>
						</div>
					</juci-config-line>
					<juci-config-line title="{{'Exclude STA' | translate}}" help="{{'Choose a MAC address from the list of currently active wireless devices to be added to the exclude list.'|translate}}">
						<juci-select ng-model="rssiExcl.exclude" ng-items="rssiExcl.unexcluded" editable="true" style="width: 1%"></juci-select><br />
						<button class="btn btn-default pull-right" ng-click="onRssiExclude(rssiExcl.exclude)">{{'Exclude MAC'|translate}}</button>
						<br ng-show="rssiExcl.error" />
						<br ng-show="rssiExcl.error" />
						<juci-error value="rssiExcl.error" />
					</juci-config-line>
					<juci-config-line title="{{'STAs Excluded'|translate}}" help="{{'Choose a MAC address from the list of currently excluded MAC addresses to be removed from the exclusion list.'|translate}}">
						<juci-select ng-model="rssiExcl.unexclude" ng-items="rssiExcl.excluded"></juci-select><br />
						<button class="btn btn-default pull-right" ng-click="onRssiUnexclude(rssiExcl.unexclude)">{{'Unexclude MAC'|translate}}</button>
					</juci-config-line>
				</juci-config-lines>
			</juci-config-section>
			<juci-config-section ng-show="wifilife.enabled.value && ubusproxy.enable.value">
				<h2>Controller Configuration</h2>
				<juci-config-line title="{{ 'Assoc Control On/Off' | translate}}">
					<switch class="green" ng-model="assocCtrl.enabled.value" />
				</juci-config-line>
				<juci-config-lines ng-show="assocCtrl.enabled.value">
					<juci-config-line title="{{ 'Assoc Control Interface' | translate}}" help="{{'Interface to use for assoc control'|translate}}">
						<juci-select ng-model="assocCtrl.ifname.value" ng-items="wiLiInterfaces"></juci-select>
					</juci-config-line>
					<!--<juci-config-line title="{{'Duration'|translate}}" error="assocCtrl.duration.error" help="{{'Provide the length in seconds for a device to be locked out from the AP.'|translate}}">
						<input type="number" class="form-control" ng-model="assocCtrl.duration.value" value="{{assocCtrl.duration.value}}">
					</juci-config-line>-->
					<juci-config-line title="{{'Custom Rules'|translate}}" help="{{'Create custom steering rules to force client to a certain access point.'|translate}}"></juci-config-line>
						<juci-list-editor ng-items="customRules" show-icon="true" get-item-title="getRuleTitle($item)" on-create="onAddRule()" on-delete="onDeleteRule($item)"></juci-list-editor>
				</juci-config-lines>
			</juci-config-section>
		</div>
	</div>
</juci-layout-with-sidebar>
